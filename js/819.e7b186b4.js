"use strict";(self["webpackChunkweek6_homework"]=self["webpackChunkweek6_homework"]||[]).push([[819],{819:function(t,a,s){s.r(a),s.d(a,{default:function(){return G}});var e=s(252),n=s(963),l=s(577);const o=(0,e._)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"},null,-1),i={class:"navbar navbar-expand-lg navbar-dark bg-dark"},c={class:"container-fluid"},d=(0,e.Uk)("後台"),r=(0,e._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,e._)("span",{class:"navbar-toggler-icon"})],-1),u={class:"collapse navbar-collapse",id:"navbarNav"},h={class:"navbar-nav"},b={class:"nav-item"},p=(0,e.Uk)("後台首頁"),_={class:"nav-item"},k=(0,e.Uk)("前台首頁"),g={class:"nav-item"},v=(0,e.Uk)("產品列表"),m={class:"nav-item"},w=(0,e.Uk)("優惠卷"),f={class:"nav-item"},y={key:0},C={class:"container"},x={class:"text-end mt-4"},$={class:"table mt-4"},D=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{width:"120"},"分類"),(0,e._)("th",null,"產品名稱"),(0,e._)("th",{width:"120"},"原價"),(0,e._)("th",{width:"120"},"售價"),(0,e._)("th",{width:"100"},"是否啟用"),(0,e._)("th",{width:"120"},"編輯")])],-1),U={class:"text-start"},z={class:"text-start"},M=["onClick"],P=["onClick"],W={class:"btn-group"},N=["onClick"],O=["onClick"],S={class:"modal-dialog"},j={class:"modal-content border-0"},L=(0,e._)("div",{class:"modal-header bg-danger text-white"},[(0,e._)("h5",{id:"delProductModalLabel",class:"modal-title"},[(0,e._)("span",null,"刪除產品")]),(0,e._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),T={class:"modal-body"},q=(0,e.Uk)(" 是否刪除 "),H={class:"text-danger"},Y=(0,e.Uk)(" 商品(刪除後將無法恢復)。 "),A={class:"modal-footer"},K=(0,e._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Z(t,a,s,Z,B,E){const F=(0,e.up)("router-link"),G=(0,e.up)("router-view");return(0,e.wg)(),(0,e.iD)(e.HY,null,[o,(0,e._)("nav",i,[(0,e._)("div",c,[(0,e.Wm)(F,{class:"navbar-brand",to:"/admin"},{default:(0,e.w5)((()=>[d])),_:1}),r,(0,e._)("div",u,[(0,e._)("ul",h,[(0,e._)("li",b,[(0,e.Wm)(F,{class:"nav-link",to:"/admin"},{default:(0,e.w5)((()=>[p])),_:1})]),(0,e._)("li",_,[(0,e.Wm)(F,{class:"nav-link",to:"/"},{default:(0,e.w5)((()=>[k])),_:1})]),(0,e._)("li",g,[(0,e.Wm)(F,{class:"nav-link",to:"/admin/products"},{default:(0,e.w5)((()=>[v])),_:1})]),(0,e._)("li",m,[(0,e.Wm)(F,{class:"nav-link",to:"/admin/coupon"},{default:(0,e.w5)((()=>[w])),_:1})]),(0,e._)("li",f,[(0,e._)("a",{href:"#",class:"nav-link",onClick:a[0]||(a[0]=(0,n.iM)(((...t)=>E.signOut&&E.signOut(...t)),["prevent"]))},"登出")])])])])]),B.checkSucess?((0,e.wg)(),(0,e.iD)("h2",y,"後台登入成功")):(0,e.kq)("",!0),B.checkSucess?((0,e.wg)(),(0,e.j4)(G,{key:1})):(0,e.kq)("",!0),(0,e._)("div",C,[(0,e._)("div",x,[(0,e._)("button",{class:"btn btn-primary",onClick:a[1]||(a[1]=a=>t.openModal("new"))}," 建立新的產品 ")]),(0,e._)("table",$,[D,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(B.products,(a=>((0,e.wg)(),(0,e.iD)("tr",{key:a.id},[(0,e._)("td",null,(0,l.zw)(a.category),1),(0,e._)("td",null,(0,l.zw)(a.title),1),(0,e._)("td",U,(0,l.zw)(a.origin_price),1),(0,e._)("td",z,(0,l.zw)(a.price),1),(0,e._)("td",null,[a.is_enabled?((0,e.wg)(),(0,e.iD)("span",{key:0,class:"text-success",onClick:t=>a.is_enabled=!a.is_enabled},"啟用",8,M)):((0,e.wg)(),(0,e.iD)("span",{key:1,onClick:t=>a.is_enabled=!a.is_enabled},"未啟用",8,P))]),(0,e._)("td",null,[(0,e._)("div",W,[(0,e._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:s=>t.openModal("edit",a)}," 編輯 ",8,N),(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:s=>t.openModal("del",a)}," 刪除 ",8,O)])])])))),128))])])]),(0,e._)("div",S,[(0,e._)("div",j,[L,(0,e._)("div",T,[q,(0,e._)("strong",H,(0,l.zw)(B.tempProducts.title),1),Y]),(0,e._)("div",A,[K,(0,e._)("button",{type:"button",class:"btn btn-danger",onClick:a[2]||(a[2]=(...a)=>t.delProduct&&t.delProduct(...a))}," 確認刪除 ")])])])],64)}var B={data(){return{checkSucess:!1,products:[],isNew:!1,num:"",tempProducts:{imagesUrl:[]},pagination:{}}},methods:{getData(){const t="https://vue3-course-api.hexschool.io/v2/api/kai/admin/products/all";this.$http.get(t).then((t=>{this.products=t.data.products,this.num=Object.keys(this.products).length,this.pagination=t.data.pagination})).catch((t=>{alert(t.data.message)}))},checkLogin(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(t){this.$http.defaults.headers.common.Authorization=t;const a="https://vue3-course-api.hexschool.io/v2/api/user/check";this.$http.post(a,{api_token:this.token}).then((t=>{this.checkSucess=!0})).catch((t=>{console.log(t),this.$router.push("/login")}))}else alert("請先登入"),this.$router.push("/login")},signOut(){document.cookie="hexToken=;expires=;",alert("token已清除"),this.$router.push("/login")}},mounted(){this.checkLogin(),this.getData()}},E=s(744);const F=(0,E.Z)(B,[["render",Z]]);var G=F}}]);
//# sourceMappingURL=819.e7b186b4.js.map