{"version":3,"file":"js/264.a1b17756.js","mappings":"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","sources":["webpack://week6-homework/./src/views/CartView.vue","webpack://week6-homework/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\n  <h2>購物車</h2>\n  <div class=\"container\">\n    <table class=\"table align-middle\">\n      <thead>\n        <tr>\n          <th>圖片</th>\n          <th>商品名稱</th>\n          <th>價格</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"product in products\" :key=\"product.id\">\n          <td style=\"width: 200px\">\n            <!-- 塞背景圖的方式,html知識 -->\n            <div\n              :style=\"{ backgroundImage: `url(${product.imageUrl})` }\"\n              style=\"\n                height: 100px;\n                background-size: cover;\n                background-position: center;\n              \"\n            ></div>\n          </td>\n          <td>\n            {{ product.title }}\n          </td>\n          <td>\n            <div class=\"h5\" v-if=\"product.price === product.origin_price\">\n              {{ product.price }} 元\n            </div>\n            <div v-else>\n              <del class=\"h6\">原價 {{ product.origin_price }} 元</del>\n              <div class=\"h5\">現在只要 {{ product.price }} 元</div>\n            </div>\n          </td>\n          <td>\n            <!-- loading -->\n            <!-- 寫在按鈕上:  :disabled=\"isLoadingItem==product.id;\" -->\n            <!-- 寫在<i>上 v-show -->\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-secondary\"\n                @click=\"openProductModal(product.id)\"\n              >\n                <i\n                  class=\"fas fa-spinner fa-pulse\"\n                  v-show=\"isLoadingItem == product.id\"\n                ></i>\n                查看更多\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-danger\"\n                @click=\"addToCart(product.id)\"\n              >\n                <div class=\"spinner-border spinner-border-sm\" role=\"status\"\n                v-show=\"isLoadingItem == product.id\"\n                >\n                  <span class=\"sr-only\"></span>\n                </div>\n                加到購物車\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport emitter from '../libs/emitter'\n\nexport default {\n  data () {\n    return {\n      //   cartData: {},\n      products: [],\n      isLoadingItem: '',\n      productId: ''\n      //   user: {\n      //     name: \"\",\n      //     email: \"\",\n      //     tel: \"\",\n      //     address: \"\",\n      //   },\n      //   message: \"\",\n    }\n  },\n  // 用區域元件方式註冊驗證元件\n  // components: {\n  //     //自訂名稱:前方解構的\n  //     Vform: Form,\n  //     Vfield: Field,\n  //     ErrorMessage: ErrorMessage,\n  // },\n  methods: {\n    getProducts () {\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((res) => {\n          this.products = res.data.products\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    // openProductModal(id) {\n    //   //元件要加上ref才能用此方式呼叫\n    //   this.productId = id;\n    //   this.$refs.productModal.openModal();\n    // },\n    getCart () {\n      this.$http(\n        `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      )\n        .then((res) => {\n          this.cartData = res.data.data\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    addToCart (id, qty = 1) {\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.isLoadingItem = id\n      this.$http\n        .post(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`,\n          { data }\n        )\n        .then((res) => {\n          console.log(this.isLoadingItem)\n          this.getCart()\n          this.isLoadingItem = ''\n          emitter.emit('get-cart')\n          //   this.$refs.productModal.closeModal();\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n    // removeCartItem(id) {\n    //   this.isLoadingItem = id;\n    //   axios\n    //     .delete(`${apiUrl}/api/${apiPath}/cart/${id}`)\n    //     .then((res) => {\n    //       this.getCart();\n    //       this.isLoadingItem = \"\";\n    //     })\n    //     .catch((err) => {\n    //       console.log(err);\n    //     });\n    // },\n    // removeCarts() {\n    //   axios\n    //     .delete(`${apiUrl}/api/${apiPath}/carts`)\n    //     .then((res) => {\n    //       this.getCart();\n    //     })\n    //     .catch((err) => {\n    //       console.log(err);\n    //     });\n    // },\n    // updateCartItem(item) {\n    //   const data = {\n    //     product_id: item.id,\n    //     qty: item.qty,\n    //   };\n    //   this.isLoadingItem = item.id;\n    //   axios\n    //     .put(`${apiUrl}/api/${apiPath}/cart/${item.id}`, { data })\n    //     .then((res) => {\n    //       this.getCart();\n    //       this.isLoadingItem = \"\";\n    //     })\n    //     .catch((err) => {\n    //       console.log(err);\n    //     });\n    // },\n    // 手機號碼規則\n    // isPhone(value) {\n    //   const phoneNumber = /^(09)[0-9]{8}$/;\n    //   return phoneNumber.test(value) ? true : \"需要正確的電話號碼\";\n    // },\n    // 送出表單\n    // onSubmit() {\n    //   const data = {\n    //     user: this.user,\n    //     message: this.meaasge,\n    //   };\n    //   axios\n    //     .post(`${apiUrl}/api/${apiPath}/order`, { data })\n    //     .then((res) => {\n    //       //重設表單\n    //       console.log(res);\n    //       this.$refs.form.resetForm();\n    //     })\n    //     .catch((err) => {\n    //       console.log(err);\n    //     });\n    // },\n  },\n  mounted () {\n    this.getProducts()\n    this.getCart()\n  }\n}\n</script>\n","import { render } from \"./CartView.vue?vue&type=template&id=1ae30d62\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wuxiangkai/Desktop/sample-gh-pages-main/vue開發/w6/week6-homework/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","role","_hoisted_16","_hoisted_1","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","product","key","id","backgroundImage","imageUrl","_toDisplayString","title","price","origin_price","_hoisted_7","type","onClick","_ctx","$options","_hoisted_17","data","products","isLoadingItem","productId","methods","getProducts","this","$http","get","then","res","catch","err","console","log","getCart","cartData","addToCart","qty","product_id","post","emitter","mounted","__exports__","render"],"sourceRoot":""}